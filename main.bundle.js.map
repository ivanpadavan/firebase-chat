{"version":3,"sources":["webpack:///./src/app/services/open-chat.service.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/directives/new-message.directive.ts","webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/chat.component.ts","webpack:///./src/app/components/message-component/message.component.ts","webpack:///./src/app/pipes/keys.pipe.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/components/message-component/message.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/components/message-component/message.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["import { Injectable } from '@angular/core';\nimport {Http} from '@angular/http';\nimport {Driver, openedChat} from '../app.component';\n\n@Injectable()\nexport class OpenChatService {\n  openedChats: openedChat[] = [];\n  drivers: Driver[] = [];\n  constructor(private http: Http) {\n    this.http\n      .get('http://transport.poseidongroup.ru/cars')\n      .subscribe(\n        (res) => {\n          this.drivers = res.json().map(x => Object.assign(new Driver(), x));\n          this.drivers.sort((a, b) => a.fullName > b.fullName ? -1 : 1);\n        }\n      )\n  }\n\n  openChat(user: string) {\n    const driver = this.drivers.filter(x => x.token === user)[0];\n\n    if (!this.openedChats.find((value) => value.id === user)) {\n      this.openedChats.push({id: user, name: driver.fullName});\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/services/open-chat.service.ts","import {AfterViewInit, Component, OnInit, ViewChild, ViewChildren} from '@angular/core';\nimport {AngularFire, FirebaseObjectObservable} from 'angularfire2';\nimport {OpenChatService} from './services/open-chat.service';\nimport {NewMessageDirective} from './directives/new-message.directive';\n\nexport interface openedChat {\n  name: string;\n  id: string;\n}\nexport class Driver {\n  private id;\n  private lname_driver;\n  private fname_driver;\n  private phone_driver;\n  token;\n  get fullName() {\n    const isFull = [this.lastName, this.firstName]\n      .map(x => x.length)\n      .reduce((acc, val) => acc && val);\n    const name = `${this.lastName}${isFull ? ' ' : ''}${this.firstName}`;\n    return name.length ? name : 'Безымянный водитель';\n  }\n  get lastName() {\n    return this.lname_driver || '';\n  }\n\n  get firstName() {\n    return this.fname_driver || '';\n  }\n}\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit, AfterViewInit {\n  @ViewChildren(NewMessageDirective) vc:NewMessageDirective[];\n  showSidebar = true;\n  id: string = '';\n  users$: FirebaseObjectObservable<any>;\n  get isUnread() {\n    return this.vc.map((x: NewMessageDirective) => x.isUnread).reduce((a, b) => a || b, false);\n  }\n  constructor(\n    private af: AngularFire,\n    private chatService: OpenChatService\n  ) {}\n\n  ngOnInit() {\n    this.af.auth.login({email: 'operator@operator.com', password: 'operator'});\n    this.users$ = this.af.database.object('/users');\n  }\n\n  ngAfterViewInit() {\n    setInterval(() => {\n      const elem = document.querySelector('.togBtn');\n      if (elem) {\n      this.isUnread ?\n        elem.classList.add('un_readed') :\n        elem.classList.remove('un_readed');\n      }\n    }, 1000);\n  }\n\n  openChat(user: string) {\n    this.chatService.openChat(user);\n    this.id = user;\n  }\n\n  closeChat(user: openedChat, index) {\n    this.chatService.openedChats.splice(index, 1);\n\n    if (this.id === user.id) {\n      const len = this.chatService.openedChats.length;\n\n      if (len === 0) {\n        this.id = '';\n      } else {\n        this.id = len === index ?\n          this.chatService.openedChats[index-1].id :\n          this.chatService.openedChats[index].id;\n      }\n    }\n  }\n  getName(user) {\n    const driver = this.chatService.drivers.filter(x => x.token === user)[0];\n    return driver.fullName;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import {Directive, ElementRef, Input, OnChanges, SimpleChanges} from '@angular/core';\nimport {AngularFire} from 'angularfire2';\nimport {OpenChatService} from '../services/open-chat.service';\n\n@Directive({\n  selector: '[newMessage]'\n})\nexport class NewMessageDirective implements OnChanges {\n  @Input() id: string;\n  isUnread = false;\n  constructor(private el: ElementRef, private af: AngularFire, private chatService: OpenChatService) {}\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.af.database.object(`users/${this.id}`).subscribe(res => {\n      const lastOpened = +new Date(res.lastOpened || 0);\n      const lastMessage = +new Date(res.lastMessage || 0);\n      this.isUnread = lastOpened < lastMessage;\n      if (this.isUnread) {\n        this.el.nativeElement.classList.add('un_readed');\n        if (this.chatService.openedChats.length) {\n          this.chatService.openChat(this.id);\n        }\n      } else {\n        this.el.nativeElement.classList.remove('un_readed');\n      }\n    })\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/directives/new-message.directive.ts","function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 319;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 319\n// module chunks = 1","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {BrowserModule} from \"@angular/platform-browser\";\nimport {NgModule} from \"@angular/core\";\nimport {FormsModule} from \"@angular/forms\";\nimport {HttpModule} from \"@angular/http\";\n\nimport {AppComponent} from \"./app.component\";\nimport {AngularFireModule, AuthMethods, AuthProviders} from \"angularfire2\";\nimport {KeysPipe} from \"./pipes/keys.pipe\";\nimport {MessageComponent} from \"./components/message-component/message.component\";\nimport {ChatComponent} from \"./components/chat.component\";\nimport {HashLocationStrategy, LocationStrategy} from \"@angular/common\";\nimport { NewMessageDirective } from './directives/new-message.directive';\nimport {OpenChatService} from './services/open-chat.service';\n\nconst firebaseTestConfig = {\n  apiKey: \"AIzaSyDEFJPpyGALNqn4quypS4Wfd4J43IxnNdI\",\n  authDomain: \"test-f37a3.firebaseapp.com\",\n  databaseURL: \"https://test-f37a3.firebaseio.com\",\n  storageBucket: \"test-f37a3.appspot.com\",\n  messagingSenderId: \"615862229636\",\n\n};\nconst firebaseProdConfig = {\n  apiKey: \"AIzaSyBr2ccbjy9BptDsbAvUaWPk-V01D4J0WJs\",\n  authDomain: \"transport-d5932.firebaseapp.com\",\n  databaseURL: \"https://transport-d5932.firebaseio.com\",\n  storageBucket: \"transport-d5932.appspot.com\",\n  messagingSenderId: \"498701825296\"\n};\n\nconst firebaseAuthConfig = {\n  provider: AuthProviders.Password,\n  method: AuthMethods.Password,\n};\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    KeysPipe,\n    ChatComponent,\n    MessageComponent,\n    NewMessageDirective,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    HttpModule,\n    AngularFireModule.initializeApp(window.location.host === 'transport.poseidongroup.ru' ? firebaseProdConfig : firebaseTestConfig, firebaseAuthConfig),\n  ],\n  providers: [\n    {\n      provide: LocationStrategy,\n      useClass: HashLocationStrategy,\n    },\n    OpenChatService,\n  ],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import {Component, Input, OnChanges} from \"@angular/core\";\nimport {AngularFire, FirebaseListObservable} from \"angularfire2\";\nimport {Headers, Http, RequestOptions} from \"@angular/http\";\nimport 'rxjs/add/operator/take';\n@Component({\n    moduleId: module.id,\n    selector: 'chat',\n    template: `\n  <div style=\"height: calc(100% - 30px); overflow-y: auto\" id=\"scrollable\">\n        <div *ngFor=\"let message of chat$ | async\">\n          <message [me]=\"message.name == 'operator'\"\n                   [text]=\"message.text\"\n                   [imageURL]=\"message.imageURL\"\n                   [date]=\"message.date\"></message>\n          <div style=\"clear: both\"></div>\n        </div>\n      </div>\n\n    <div style=\"display: flex; height: 30px\">\n      <input type=\"text\" style=\"flex-grow: 1\" [(ngModel)]=\"newMessage\" (keyup.enter)=\"send()\">\n      <button class=\"btn btn-primary\" style=\"border-radius: 0; line-height: 1;\" (click)=\"send()\" [disabled]=\"!newMessage\">Отправить</button>\n    </div>`\n})\nexport class ChatComponent implements OnChanges {\n  @Input() id: string;\n  newMessage = '';\n  chat$: FirebaseListObservable<any>;\n    constructor(private af: AngularFire, private http: Http) { }\n\n    ngOnChanges() {\n        this.chat$ = this.af.database.list(`/messages/${this.id}`, {\n          query: {\n            limitToLast: 100,\n            orderByChild: 'date'\n          }\n        });\n\n        this.chat$.take(1).subscribe((res) => {\n          this.af.database.object(`users/${this.id}`).update({\n            lastOpened: (new Date).toISOString()\n          })\n        });\n    }\n  send() {\n    if (!this.newMessage.length) return;\n    this.af.database.list(`/messages/${this.id}`).push({name: 'operator', text: this.newMessage, date: (new Date).toISOString()});\n\n    this.af.database.object(`users/${this.id}/pushToken`).subscribe((token) => {\n      this.http.post(`https://fcm.googleapis.com/fcm/send`, {\n          to: token.$value,\n        \"notification\": {title: \"New msg\",\n          body: this.newMessage,\n          sound: 'default'}\n        },\n        new RequestOptions({headers: new Headers({\n          'Content-Type':'application/json',\n          'Authorization':`key=${window.location.host === 'transport.poseidongroup.ru' ?\n            'AAAAj2Q_2oQ:APA91bEFo5fq5aSoyfy2A_jJ8y_imc7sUcRGBViemnaqITQ24iUE7dJ3s0_oZ_FtKQcNFeeDcyO2mr9DLzEra3Ozx6gDFYJ110FlYVNxSiPiPfnJIyGtc8U_PBCUFgVqR_xyrU6zAHr8' :\n            'AAAAdBzx9RA:APA91bEYwKUSkAGnPAbhGQqy5d-DDVwfnUuB3BU7zkwwnFQqmMuHxbTscPiZHU5jfumbrkKbegAXFz3xMLb5JMlp0YH32lMwXp0aohzSWfV3ZYg_bIhw9Bat9TeYv1TMoc1a27zEOGIh'}`\n        })})).subscribe((res) => this.newMessage='');\n    })\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/chat.component.ts","import {Component, AfterViewInit, Input} from '@angular/core';\n\n@Component({\n  selector: 'message',\n  templateUrl: 'message.component.html',\n  styleUrls: ['message.component.css']\n})\nexport class MessageComponent implements AfterViewInit {\n  @Input() me: boolean;\n  @Input() text: string;\n  @Input() date: string;\n  @Input() imageURL: string;\n  constructor() { }\n\n  ngAfterViewInit() {\n    let node = document.getElementById('scrollable');\n    node.scrollTop = node.scrollHeight;\n  }\n\n  openInNewTab(url) {\n    let win = window.open(url, '_blank');\n    win.focus();\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/message-component/message.component.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'keys'\n})\nexport class KeysPipe implements PipeTransform {\n  transform(value, args:string[]) : any {\n    let keys = [];\n    for (let key in value) {\n      keys.push(key);\n      if (key == \"$value\") return []\n    }\n    return keys;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pipes/keys.pipe.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":host {\\n  height: 100%;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n}\\n\\n.sidebar {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n  height: 100%;\\n  max-width: 0;\\n  white-space: nowrap;\\n  border-left: 1px solid transparent;\\n  -webkit-transition: all .35s cubic-bezier(0.36, 1.36, 1, 1);\\n  transition: all .35s cubic-bezier(0.36, 1.36, 1, 1);\\n}\\n\\n\\n.sidebar.opened {\\n  max-width: 50%;\\n  border-color: #ddd;\\n}\\n\\n.toggle {\\n  visibility: hidden;\\n  background-color: rgba(0, 0, 0, 0);\\n}\\n.toggle_label {\\n  float: right;\\n  margin: 5px;\\n  font-size: 30px;\\n  cursor: pointer;\\n  /*color: #fafafa;*/\\n  color: #777;\\n  text-align: right;\\n  display: inline-block;\\n  font-family: 'Glyphicons Halflings';\\n  font-style: normal;\\n  font-weight: 400;\\n  line-height: 1;\\n  -webkit-font-smoothing: antialiased;\\n  -moz-osx-font-smoothing: grayscale;\\n}\\n.toggle_label:after {\\n  content: \\\"\\\\E236\\\";\\n}\\n\\n.nav-tabs {\\n  /*background-color: #135073;\\n  border-bottom-width: 0;*/\\n}\\n\\n.nav-pills {\\n  overflow-y: auto;\\n  overflow-x: hidden;\\n}\\n\\n.close-chat {\\n  top: -10px;\\n  left: 12px;\\n  cursor: pointer;\\n}\\n\\n.tab-content {\\n  height: calc(100% - 42px);\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n}\\n\\nli.active a, .tab-content {\\n  /*background-color: #fafafa;*/\\n}\\n\\n.nav-pills>li>a, .nav-tabs>li>a {\\n  border-radius: 0;\\n  /*color: #fafafa;*/\\n}\\n.nav-pills>li>a:hover {\\n  /*background-color: #114362;*/\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 494\n// module chunks = 1","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".msg {\\n  font-size: 14px;\\n  margin-top: 5px;\\n  margin-bottom: 20px;\\n}\\n\\n.msg_text {\\n  width: 100%;\\n  max-width: 300px;\\n  word-wrap: break-word;\\n  text-align: center;\\n}\\n\\n.me .msg_text {\\n  background-color: #30A9FF;\\n  color: white;\\n  padding: 8px;\\n  border-radius: 15px;\\n\\n}\\n\\n.them .msg_text {\\n  background-color: #e0e0e0;\\n  color: #333;\\n  padding: 7px;\\n  border-radius: 15px;\\n}\\n\\n.authorimg {\\n  margin: 0 5px 5px 5px;\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 15px;\\n}\\n\\n.msg_timestamp {\\n  color: gray;\\n  font-size: 11px;\\n  margin: 0 12px;\\n}\\n\\n.me .msg_timestamp {\\n  text-align: right;\\n  float: right;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/message-component/message.component.css\n// module id = 495\n// module chunks = 1","module.exports = \"<!-- TAB NAVIGATION -->\\n    <ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\">\\n\\n      <li *ngFor=\\\"let user of chatService.openedChats; let i = index\\\"\\n          [ngClass]=\\\"{'active': user.id === id}\\\"\\n          (click)=\\\"id = user.id\\\"\\n          style=\\\"float: none; border: 1px #dddddd solid; border-radius: 5px; background-color: white\\\">\\n        <a newMessage [id]=\\\"user.id\\\">\\n          {{user.name}}\\n          <span class=\\\"glyphicon glyphicon-remove close-chat\\\"\\n          (click)=\\\"closeChat(user, i)\\\"\\n          ></span>\\n        </a>\\n      </li>\\n\\n      <label for=\\\"toggle\\\" class=\\\"toggle_label\\\"></label>\\n      <input type=\\\"checkbox\\\" class=\\\"toggle\\\" id=\\\"toggle\\\" [(ngModel)]=\\\"showSidebar\\\">\\n    </ul>\\n    <!-- TAB CONTENT -->\\n    <div class=\\\"tab-content\\\">\\n      <div style=\\\"flex-grow: 1; height: 100%; background-color: white\\\" (click)=\\\"showSidebar = false\\\"\\n           [ngStyle]=\\\"{\\n           'z-index': chatService.openedChats?.length ? 2 : 0\\n           }\\\">\\n\\n        <chat *ngIf=\\\"id\\\" [id]=\\\"id\\\"></chat>\\n      </div>\\n      <div class=\\\"sidebar\\\" [ngClass]=\\\"{'opened': showSidebar, 'closed': !showSidebar}\\\">\\n        <ul class=\\\"nav nav-pills nav-stacked\\\" >\\n          <li *ngFor=\\\"let user of users$ | async | keys\\\"\\n              style=\\\"cursor: pointer\\\"\\n              (click)=\\\"openChat(user)\\\">\\n            <a newMessage [id]=\\\"user\\\" [innerHtml]=\\\"getName(user)\\\"></a>\\n          </li>\\n        </ul>\\n      </div>\\n\\n    </div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 501\n// module chunks = 1","module.exports = \"<div>\\n\\n  <div *ngIf=\\\"me == false\\\" style=\\\"float: left\\\" class=\\\"msg them\\\">\\n      <div>\\n        <div *ngIf=\\\"text\\\" [innerHtml]=\\\"text\\\"  class=\\\"msg_text\\\"></div>\\n        <img *ngIf=\\\"imageURL\\\" [src]=\\\"imageURL\\\" style=\\\"cursor: pointer\\\" (click)=\\\"openInNewTab(imageURL)\\\"  class=\\\"msg_text\\\" />\\n      </div>\\n      <span class=\\\"msg_timestamp\\\" [innerHtml]=\\\"date | date : 'medium'\\\"></span>\\n  </div>\\n\\n  <div *ngIf=\\\"me == true\\\" style=\\\"float: right\\\" class=\\\"msg me\\\">\\n    <div>\\n      <div *ngIf=\\\"text\\\" [innerHtml]=\\\"text\\\"  class=\\\"msg_text\\\"></div>\\n      <img *ngIf=\\\"imageURL\\\" [src]=\\\"imageURL\\\" style=\\\"cursor: pointer\\\" (click)=\\\"openInNewTab(imageURL)\\\" class=\\\"msg_text\\\" />\\n    </div>\\n    <span class=\\\"msg_timestamp\\\" [innerHtml]=\\\"date | date : 'medium'\\\"></span>\\n  </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/message-component/message.component.html\n// module id = 502\n// module chunks = 1"],"sourceRoot":""}