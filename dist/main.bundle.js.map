{"version":3,"sources":["webpack:///./src async","webpack:///./src/main.ts","webpack:///./src/app/app.component.ts","webpack:///./src/app/app.module.ts","webpack:///./src/app/components/chat.component.ts","webpack:///./src/app/components/message-component/message.component.ts","webpack:///./src/app/pipes/keys.pipe.ts","webpack:///./src/environments/environment.ts","webpack:///./src/app/app.component.css","webpack:///./src/app/components/message-component/message.component.css","webpack:///./src/app/app.component.html","webpack:///./src/app/components/message-component/message.component.html"],"names":[],"mappings":"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","file":"main.bundle.js","sourcesContent":["function webpackEmptyContext(req) {\n\tthrow new Error(\"Cannot find module '\" + req + \"'.\");\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 346;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src async\n// module id = 346\n// module chunks = 1","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule);\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.ts","import {Component, OnInit} from '@angular/core';\nimport {AngularFire, FirebaseObjectObservable, FirebaseListObservable} from \"angularfire2\";\n\n@Component({\n  selector: 'app-root',\n  templateUrl: './app.component.html',\n  styleUrls: ['./app.component.css']\n})\nexport class AppComponent implements OnInit {\n  uid: string;\n  newMessage: string = '';\n  users$: FirebaseObjectObservable<any>;\n  constructor(private af: AngularFire) {}\n\n  ngOnInit() {\n    this.af.auth.login();\n    this.users$ = this.af.database.object('/users');\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.component.ts","import { BrowserModule } from '@angular/platform-browser';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { HttpModule } from '@angular/http';\n\nimport { AppComponent } from './app.component';\nimport {AngularFireModule, AuthProviders, AuthMethods} from \"angularfire2\";\nimport {KeysPipe} from \"./pipes/keys.pipe\";\nimport { MessageComponent } from './components/message-component/message.component';\nimport {RouterModule, Route} from \"@angular/router\";\nimport {ChatComponent} from \"./components/chat.component\";\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDEFJPpyGALNqn4quypS4Wfd4J43IxnNdI\",\n  authDomain: \"test-f37a3.firebaseapp.com\",\n  databaseURL: \"https://test-f37a3.firebaseio.com\",\n  storageBucket: \"test-f37a3.appspot.com\",\n  messagingSenderId: \"615862229636\"\n};\n\nconst firebaseAuthConfig = {\n  provider: AuthProviders.Password,\n  method: AuthMethods.Password,\n}\n\nconst routes: Route[] = [\n  {path: \"chat/:id\", component: ChatComponent}\n];\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    KeysPipe,\n    ChatComponent,\n    MessageComponent,\n  ],\n  imports: [\n    BrowserModule,\n    FormsModule,\n    RouterModule.forRoot(routes),\n    HttpModule,\n    AngularFireModule.initializeApp(firebaseConfig, firebaseAuthConfig),\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/app.module.ts","import { Component, OnInit } from '@angular/core';\nimport {ActivatedRoute} from \"@angular/router\";\nimport {AngularFire, FirebaseObjectObservable} from \"angularfire2\";\nimport {Http, RequestOptions, Headers} from \"@angular/http\";\n\n@Component({\n    moduleId: module.id,\n    selector: 'chat',\n    template: `\n  <div style=\"height: calc(100% - 30px); overflow-y: auto\" id=\"scrollable\">\n      <h2>Chat</h2>\n        <div *ngFor=\"let message of chat$ | async | keys\">\n          <message [me]=\"(chat$ | async)[message].name == 'operator'\"\n                   [text]=\"(chat$ | async)[message].text\"\n                   [imageURL]=\"(chat$ | async)[message].imageURL\"\n                   [date]=\"(chat$ | async)[message].date\"></message>\n          <div style=\"clear: both\"></div>\n        </div>\n      </div>\n\n    <div style=\"display: flex; height: 30px\">\n      <input type=\"text\" style=\"flex-grow: 1\" [(ngModel)]=\"newMessage\" (keyup.enter)=\"send()\">\n      <button class=\"btn btn-primary\" (click)=\"send()\" [disabled]=\"!newMessage\">Send</button>\n    </div>`\n})\nexport class ChatComponent implements OnInit {\n  id: string;\n  newMessage = '';\n  chat$: FirebaseObjectObservable<any>;\n    constructor(private route: ActivatedRoute, private af: AngularFire, private http: Http) { }\n\n    ngOnInit() {\n      this.route.params.subscribe((params) => {\n        this.id = params['id'];\n        this.chat$ = this.af.database.object(`/messages/${this.id}`);\n      });\n    }\n  send() {\n    this.af.database.list(`/messages/${this.id}`).push({name: 'operator', text: this.newMessage, date: (new Date).toISOString()})\n\n    this.af.database.object(`users/${this.id}/pushToken`).subscribe((token) => {\n      this.http.post(`https://fcm.googleapis.com/fcm/send`, {\n          to: token.$value,\n        \"notification\": {title: \"New msg\",\n          body: this.newMessage,\n          sound: 'default'}\n        },\n        new RequestOptions({headers: new Headers({\n          'Content-Type':'application/json',\n          'Authorization':'key=AAAAj2Q_2oQ:APA91bEFo5fq5aSoyfy2A_jJ8y_imc7sUcRGBViemnaqITQ24iUE7dJ3s0_oZ_FtKQcNFeeDcyO2mr9DLzEra3Ozx6gDFYJ110FlYVNxSiPiPfnJIyGtc8U_PBCUFgVqR_xyrU6zAHr8'\n        })})).subscribe((res) => this.newMessage='');\n    })\n\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/chat.component.ts","import {Component, AfterViewInit, Input} from '@angular/core';\n\n@Component({\n  selector: 'message',\n  templateUrl: 'message.component.html',\n  styleUrls: ['message.component.css']\n})\nexport class MessageComponent implements AfterViewInit {\n  @Input() me: boolean;\n  @Input() text: string;\n  @Input() date: string;\n  @Input() imageURL: string;\n  constructor() { }\n\n  ngAfterViewInit() {\n    let node = document.getElementById('scrollable');\n    node.scrollTop = node.scrollHeight;\n  }\n\n  openInNewTab(url) {\n    let win = window.open(url, '_blank');\n    win.focus();\n}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/components/message-component/message.component.ts","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'keys'\n})\nexport class KeysPipe implements PipeTransform {\n  transform(value, args:string[]) : any {\n    let keys = [];\n    for (let key in value) {\n      keys.push(key);\n      if (key == \"$value\") return []\n    }\n    return keys;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/app/pipes/keys.pipe.ts","// The file contents for the current environment will overwrite these during build.\n// The build system defaults to the dev environment which uses `environment.ts`, but if you do\n// `ng build --env=prod` then `environment.prod.ts` will be used instead.\n// The list of which env maps to which file can be found in `.angular-cli.json`.\n\nexport const environment = {\n  production: false\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/environments/environment.ts","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.css\n// module id = 532\n// module chunks = 1","exports = module.exports = require(\"../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".msg {\\n  font-size: 14px;\\n  margin-top: 5px;\\n  margin-bottom: 20px;\\n}\\n\\n.msg_text {\\n  width: 100%;\\n  max-width: 300px;\\n  text-align: center;\\n}\\n\\n.me .msg_text {\\n  background-color: #30A9FF;\\n  color: white;\\n  padding: 8px;\\n  border-radius: 15px;\\n\\n}\\n\\n.them .msg_text {\\n  background-color: #e0e0e0;\\n  color: #333;\\n  padding: 7px;\\n  border-radius: 15px;\\n}\\n\\n.authorimg {\\n  margin: 0 5px 5px 5px;\\n  width: 30px;\\n  height: 30px;\\n  border-radius: 15px;\\n}\\n\\n.msg_timestamp {\\n  color: gray;\\n  font-size: 11px;\\n  margin: 0 12px;\\n}\\n\\n.me .msg_timestamp {\\n  text-align: right;\\n  float: right;\\n}\\n\", \"\"]);\n\n// exports\n\n\n/*** EXPORTS FROM exports-loader ***/\nmodule.exports = module.exports.toString();\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/message-component/message.component.css\n// module id = 533\n// module chunks = 1","module.exports = \"<!-- TAB NAVIGATION -->\\n<ul class=\\\"nav nav-tabs\\\" role=\\\"tablist\\\" style=\\\"height: 42px\\\">\\n  <li *ngFor=\\\"let user of users$ | async | keys; let i = index\\\"\\n      [routerLink]=\\\"['./chat',user]\\\" routerLinkActive=\\\"active\\\" style=\\\"cursor: pointer\\\">\\n    <!--<a [innerHtml]=\\\"(users$ | async)[user].name\\\"></a>-->\\n    <a [innerHtml]=\\\"i+1\\\"></a>\\n  </li>\\n</ul>\\n<!-- TAB CONTENT -->\\n<div style=\\\"height: calc(100% - 42px)\\\">\\n  <router-outlet></router-outlet>\\n</div>\\n\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/app.component.html\n// module id = 539\n// module chunks = 1","module.exports = \"<div>\\n\\n  <div *ngIf=\\\"me == false\\\" style=\\\"float: left\\\" class=\\\"msg them\\\">\\n      <div>\\n        <div *ngIf=\\\"text\\\" [innerHtml]=\\\"text\\\"  class=\\\"msg_text\\\"></div>\\n        <img *ngIf=\\\"imageURL\\\" [src]=\\\"imageURL\\\" style=\\\"cursor: pointer\\\" (click)=\\\"openInNewTab(imageURL)\\\"  class=\\\"msg_text\\\" />\\n      </div>\\n      <span class=\\\"msg_timestamp\\\" [innerHtml]=\\\"date | date : 'medium'\\\"></span>\\n  </div>\\n\\n  <div *ngIf=\\\"me == true\\\" style=\\\"float: right\\\" class=\\\"msg me\\\">\\n    <div>\\n      <div *ngIf=\\\"text\\\" [innerHtml]=\\\"text\\\"  class=\\\"msg_text\\\"></div>\\n      <img *ngIf=\\\"imageURL\\\" [src]=\\\"imageURL\\\" style=\\\"cursor: pointer\\\" (click)=\\\"openInNewTab(imageURL)\\\" class=\\\"msg_text\\\" />\\n    </div>\\n    <span class=\\\"msg_timestamp\\\" [innerHtml]=\\\"date | date : 'medium'\\\"></span>\\n  </div>\\n\\n</div>\\n\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/app/components/message-component/message.component.html\n// module id = 540\n// module chunks = 1"],"sourceRoot":""}